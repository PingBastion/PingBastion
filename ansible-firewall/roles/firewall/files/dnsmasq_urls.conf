# /etc/dnsmasq.d/qos-ipsets.conf
# Dnsmasq will add resolved IPs for these domains into the named ipsets.
# NOTE: You must pre-create the ipsets (hash:ip, family inet, with a timeout) — see chat for helper.
# Wildcards: dnsmasq applies ipset= to a domain and all its subdomains.

##### Akamai CDN
ipset=/akamai.net/akamai_cdn
ipset=/akamaiedge.net/akamai_cdn
ipset=/akamaihd.net/akamai_cdn
ipset=/akamaiorigin.net/akamai_cdn
ipset=/akamaized.net/akamai_cdn
ipset=/edgesuite.net/akamai_cdn
ipset=/edgekey.net/akamai_cdn

##### Amazon CloudFront
ipset=/cloudfront.net/amazon_cloudfront

##### Amazon Prime Video
ipset=/primevideo.com/amazon_prime_video
ipset=/amazonvideo.com/amazon_prime_video
ipset=/media-amazon.com/amazon_prime_video
ipset=/ssl-images-amazon.com/amazon_prime_video
ipset=/aiv-delivery.net/amazon_prime_video
ipset=/aiv-cdn.net/amazon_prime_video
ipset=/pv-cdn.net/amazon_prime_video

##### Apple Updates (iOS/macOS)
ipset=/mesu.apple.com/apple_updates
ipset=/oscdn.apple.com/apple_updates
ipset=/appldnld.apple.com/apple_updates
ipset=/swcdn.apple.com/apple_updates
ipset=/swdownload.apple.com/apple_updates
ipset=/swdist.apple.com/apple_updates
ipset=/swscan.apple.com/apple_updates

##### BitTorrent (public trackers — indicative only)
ipset=/openbittorrent.com/bittorrent
ipset=/opentrackr.org/bittorrent
ipset=/publicbt.com/bittorrent
ipset=/coppersurfer.tk/bittorrent

##### Discord
ipset=/discord.com/discord
ipset=/discord.gg/discord
ipset=/discordapp.com/discord
ipset=/media.discordapp.net/discord
ipset=/cdn.discordapp.com/discord
ipset=/dis.gd/discord

##### Disney+
ipset=/disneyplus.com/disney_plus
ipset=/disney-plus.net/disney_plus
ipset=/dssott.com/disney_plus
ipset=/dssedge.com/disney_plus
ipset=/bamgrid.com/disney_plus
ipset=/cdn.registerdisney.go.com/disney_plus
ipset=/bam.nr-data.net/disney_plus
ipset=/js-agent.newrelic.com/disney_plus
ipset=/adobedtm.com/disney_plus
ipset=/starott.com/disney_plus

##### Epic Games / Launcher
ipset=/epicgames.com/epic_games
ipset=/unrealengine.com/epic_games
ipset=/cdn1.epicgames.com/epic_games
ipset=/download.epicgames.com/epic_games
ipset=/cdn.unrealengine.com/epic_games
ipset=/fastly-download.epicgames.com/epic_games
ipset=/epicgames-download1.akamaized.net/epic_games

##### Fastly CDN
ipset=/fastly.net/fastly_cdn
ipset=/fastlylb.net/fastly_cdn

##### GeForce NOW
ipset=/gfn.nvidia.com/geforce_now
ipset=/geforcenow.com/geforce_now

##### Google Meet
ipset=/meet.google.com/google_meet
ipset=/stream.meet.google.com/google_meet
ipset=/meetings.googleapis.com/google_meet
ipset=/meetings.clients6.google.com/google_meet
ipset=/hangouts.googleapis.com/google_meet
ipset=/clients2.google.com/google_meet
ipset=/clients4.google.com/google_meet
ipset=/clients6.google.com/google_meet

##### Hulu
ipset=/hulu.com/hulu
ipset=/cws.hulu.conviva.com/hulu
ipset=/cws.conviva.com/hulu
ipset=/secure-us.imrworldwide.com/hulu
ipset=/secure-gl.imrworldwide.com/hulu
ipset=/extremereach.io/hulu
ipset=/adsafeprotected.com/hulu
ipset=/s.innovid.com/hulu
ipset=/rtr.innovid.com/hulu

##### Netflix
ipset=/netflix.com/netflix
ipset=/netflix.net/netflix
ipset=/nflxvideo.net/netflix
ipset=/nflximg.net/netflix
ipset=/nflximg.com/netflix
ipset=/nflxso.net/netflix
ipset=/nflxext.com/netflix
ipset=/nflxsearch.net/netflix

##### Nintendo Online / eShop
ipset=/wup.shop.nintendo.net/nintendo_online
ipset=/wup.eshop.nintendo.net/nintendo_online
ipset=/hac.lp1.eshop.nintendo.net/nintendo_online
ipset=/hac.lp1.d4c.nintendo.net/nintendo_online
ipset=/ccs.cdn.wup.shop.nintendo.net/nintendo_online
ipset=/ccs.cdn.wup.shop.nintendo.com/nintendo_online
ipset=/geisha-wup.cdn.nintendo.net/nintendo_online
ipset=/idbe-wup.cdn.nintendo.net/nintendo_online
ipset=/ecs-lp1.hac.shop.nintendo.net/nintendo_online
ipset=/receive-lp1.dg.srv.nintendo.net/nintendo_online

##### Ookla Speedtest
ipset=/speedtest.net/ookla
ipset=/ookla.com/ookla

##### PlayStation Network
ipset=/playstation.net/playstation_network
ipset=/dl.playstation.net/playstation_network
ipset=/psn.akadns.net/playstation_network
ipset=/loris.llnwd.net/playstation_network
ipset=/edgecast.steamstatic.com/playstation_network
ipset=/akamaihd.net/playstation_network

##### Riot Games (LoL/VALORANT)
ipset=/riotgames.com/riot_games
ipset=/l3cdn.riotgames.com/riot_games
ipset=/riotcdn.net/riot_games
ipset=/dyn.riotcdn.net/riot_games
ipset=/riotgamespatcher-a.akamaihd.net/riot_games

##### Roblox
ipset=/roblox.com/roblox
ipset=/rbxcdn.com/roblox
ipset=/rbxinfra.net/roblox
ipset=/rbxtrk.com/roblox
ipset=/robloxlabs.com/roblox
ipset=/arkoselabs.com/roblox
ipset=/roblox-api.arkoselabs.com/roblox
ipset=/cdn.arkoselabs.com/roblox

##### SoundCloud
ipset=/soundcloud.com/soundcloud
ipset=/sndcdn.com/soundcloud
ipset=/soundcloudusercontent.com/soundcloud

##### Spotify
ipset=/spotify.com/spotify
ipset=/scdn.co/spotify
ipset=/spotifycdn.com/spotify
ipset=/spotifycdn.net/spotify
ipset=/pscdn.co/spotify
ipset=/tospotify.com/spotify
ipset=/spotilocal.com/spotify

##### Steam (Valve)
ipset=/steampowered.com/steam
ipset=/steamcontent.com/steam
ipset=/steamstatic.com/steam
ipset=/steamcdn-a.akamaihd.net/steam
ipset=/steampipe.akamaized.net/steam
ipset=/qtlglb.com/steam
ipset=/steam.cdn.on.net/steam
ipset=/edgecast.steamstatic.com/steam
ipset=/akamai.steamstatic.com/steam

##### Syncthing
ipset=/syncthing.net/syncthing
ipset=/discovery.syncthing.net/syncthing
ipset=/relays.syncthing.net/syncthing
ipset=/upgrades.syncthing.net/syncthing

##### Twitch
ipset=/twitch.tv/twitch
ipset=/ttvnw.net/twitch
ipset=/jtvnw.net/twitch
ipset=/twitchcdn.net/twitch
ipset=/live-video.net/twitch
ipset=/ext-twitch.tv/twitch
ipset=/twitch.a2z.com/twitch
ipset=/twitch-shadow.net/twitch

##### Ubuntu Updates
ipset=/archive.ubuntu.com/ubuntu_updates
ipset=/security.ubuntu.com/ubuntu_updates
ipset=/archive.canonical.com/ubuntu_updates
ipset=/launchpad.net/ubuntu_updates
ipset=/ppa.launchpad.net/ubuntu_updates

##### WhatsApp (calls/messages)
ipset=/whatsapp.net/whatsapp_call
ipset=/whatsapp.com/whatsapp_call

##### Windows Update
ipset=/windowsupdate.com/windows_update
ipset=/update.microsoft.com/windows_update
ipset=/dl.delivery.mp.microsoft.com/windows_update
ipset=/do.dsp.mp.microsoft.com/windows_update
ipset=/microsoft.com.edgesuite.net/windows_update
ipset=/amupdatedl.microsoft.com/windows_update
ipset=/amupdatedl2.microsoft.com/windows_update
ipset=/amupdatedl3.microsoft.com/windows_update
ipset=/amupdatedl4.microsoft.com/windows_update
ipset=/amupdatedl5.microsoft.com/windows_update

##### Xbox Live
ipset=/xboxlive.com/xbox_live
ipset=/assets1.xboxlive.com/xbox_live
ipset=/assets2.xboxlive.com/xbox_live
ipset=/dlassets.xboxlive.com/xbox_live
ipset=/xboxone.loris.llnwd.net/xbox_live
ipset=/xboxone.vo.llnwd.net/xbox_live

##### YouTube
ipset=/youtube.com/youtube
ipset=/youtu.be/youtube
ipset=/googlevideo.com/youtube
ipset=/ytimg.com/youtube
ipset=/ggpht.com/youtube
ipset=/youtube.googleapis.com/youtube
ipset=/youtubei.googleapis.com/youtube
ipset=/youtube-nocookie.com/youtube

##### Zoom
ipset=/zoom.us/zoom
ipset=/zoomgov.com/zoom
ipset=/zoom.com/zoom
ipset=/zoomconnector.com/zoom
ipset=/zoom.com.cn/zoom
